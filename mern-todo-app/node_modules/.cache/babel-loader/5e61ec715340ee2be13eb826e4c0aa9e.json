{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.classNamesForComponentSelector = exports.stylesForComponentSelector = exports.iconsByNameSelector = exports.iconsForComponentSelector = exports.rowDataSelector = exports.cellValueSelector = exports.columnTitlesSelector = exports.columnIdsSelector = exports.hiddenColumnsSelector = exports.visibleRowCountSelector = exports.visibleRowIdsSelector = exports.visibleDataSelector = exports.currentPageDataSelector = exports.sortedDataSelector = exports.hasPreviousSelector = exports.hasNextSelector = exports.visibleColumnsSelector = exports.sortedColumnPropertiesSelector = exports.allColumnsSelector = exports.maxPageSelector = exports.filteredDataSelector = exports.metaDataColumnsSelector = exports.renderPropertiesSelector = exports.sortPropertiesSelector = exports.filterSelector = exports.pageSizeSelector = exports.currentPageSelector = exports.dataSelector = undefined;\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _reselect = require('reselect');\n\nvar _maxSafeInteger = require('max-safe-integer');\n\nvar _maxSafeInteger2 = _interopRequireDefault(_maxSafeInteger);\n\nvar _sortUtils = require('../../../utils/sortUtils');\n\nvar _dataUtils = require('../../../utils/dataUtils');\n\nvar _dataSelectors = require('../../../selectors/dataSelectors');\n\nvar dataSelectors = _interopRequireWildcard(_dataSelectors);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n/** Gets the entire data set\n * @param {Immutable} state - state object\n */\n\n\nvar dataSelector = exports.dataSelector = function dataSelector(state) {\n  return state.get('data');\n};\n/** Gets the current page from pageProperties\n * @param {Immutable} state - state object\n */\n\n\nvar currentPageSelector = exports.currentPageSelector = function currentPageSelector(state) {\n  return state.getIn(['pageProperties', 'currentPage']);\n};\n/** Gets the currently set page size\n * @param {Immutable} state - state object\n */\n\n\nvar pageSizeSelector = exports.pageSizeSelector = function pageSizeSelector(state) {\n  return state.getIn(['pageProperties', 'pageSize']);\n};\n/** Gets the currently set filter\n */\n\n\nvar filterSelector = exports.filterSelector = function filterSelector(state) {\n  return state.get('filter') || '';\n};\n\nvar sortPropertiesSelector = exports.sortPropertiesSelector = function sortPropertiesSelector(state) {\n  return state.get('sortProperties');\n};\n\nvar renderPropertiesSelector = exports.renderPropertiesSelector = function renderPropertiesSelector(state) {\n  return state.get('renderProperties');\n};\n\nvar metaDataColumnsSelector = exports.metaDataColumnsSelector = dataSelectors.metaDataColumnsSelector;\n/** Gets the data filtered by the current filter\n */\n\nvar filteredDataSelector = exports.filteredDataSelector = (0, _reselect.createSelector)(dataSelector, filterSelector, function (data, filter) {\n  return data.filter(function (row) {\n    return Object.keys(row.toJSON()).some(function (key) {\n      return row.get(key) && row.get(key).toString().toLowerCase().indexOf(filter.toLowerCase()) > -1;\n    });\n  });\n});\n/** Gets the max page size\n */\n\nvar maxPageSelector = exports.maxPageSelector = (0, _reselect.createSelector)(pageSizeSelector, filteredDataSelector, function (pageSize, data) {\n  var total = data.size;\n  var calc = total / pageSize;\n  return calc > Math.floor(calc) ? Math.floor(calc) + 1 : Math.floor(calc);\n});\nvar allColumnsSelector = exports.allColumnsSelector = (0, _reselect.createSelector)(dataSelector, function (data) {\n  return data.size === 0 ? [] : data.get(0).keySeq().toJSON();\n});\n/** Gets the column properties objects sorted by order\n */\n\nvar sortedColumnPropertiesSelector = exports.sortedColumnPropertiesSelector = (0, _reselect.createSelector)(renderPropertiesSelector, function (renderProperties) {\n  return renderProperties && renderProperties.get('columnProperties') && renderProperties.get('columnProperties').size !== 0 ? renderProperties.get('columnProperties').sortBy(function (col) {\n    return col && col.get('order') || _maxSafeInteger2.default;\n  }) : null;\n});\n/** Gets the visible columns either obtaining the sorted column properties or all columns\n */\n\nvar visibleColumnsSelector = exports.visibleColumnsSelector = dataSelectors.visibleColumnsSelector;\n/** Returns whether or not this result set has more pages\n */\n\nvar hasNextSelector = exports.hasNextSelector = (0, _reselect.createSelector)(currentPageSelector, maxPageSelector, function (currentPage, maxPage) {\n  return currentPage < maxPage;\n});\n/** Returns whether or not there is a previous page to the current data\n */\n\nvar hasPreviousSelector = exports.hasPreviousSelector = function hasPreviousSelector(state) {\n  return state.getIn(['pageProperties', 'currentPage']) > 1;\n};\n/** Gets the data sorted by the sort function specified in render properties\n *  if no sort method is supplied, it will use the default sort defined in griddle\n */\n\n\nvar sortedDataSelector = exports.sortedDataSelector = (0, _reselect.createSelector)(filteredDataSelector, sortPropertiesSelector, renderPropertiesSelector, function (filteredData, sortProperties, renderProperties) {\n  if (!sortProperties) {\n    return filteredData;\n  }\n\n  return sortProperties.reverse().reduce(function (data, sortColumnOptions) {\n    var columnProperties = renderProperties && renderProperties.get('columnProperties').get(sortColumnOptions.get('id'));\n\n    var sortFunction = columnProperties && columnProperties.get('sortMethod') || _sortUtils.defaultSort;\n\n    return sortFunction(data, sortColumnOptions.get('id'), sortColumnOptions.get('sortAscending'));\n  }, filteredData);\n});\n/** Gets the current page of data\n */\n\nvar currentPageDataSelector = exports.currentPageDataSelector = (0, _reselect.createSelector)(sortedDataSelector, pageSizeSelector, currentPageSelector, function (sortedData, pageSize, currentPage) {\n  return sortedData.skip(pageSize * (currentPage - 1)).take(pageSize);\n});\n/** Get the visible data (and only the columns that are visible)\n */\n\nvar visibleDataSelector = exports.visibleDataSelector = (0, _reselect.createSelector)(currentPageDataSelector, visibleColumnsSelector, function (currentPageData, visibleColumns) {\n  return (0, _dataUtils.getVisibleDataForColumns)(currentPageData, visibleColumns);\n});\n/** Gets the griddleIds for the visible rows */\n\nvar visibleRowIdsSelector = exports.visibleRowIdsSelector = (0, _reselect.createSelector)(currentPageDataSelector, function (currentPageData) {\n  return currentPageData.map(function (c) {\n    return c.get('griddleKey');\n  });\n});\n/** Gets the count of visible rows */\n\nvar visibleRowCountSelector = exports.visibleRowCountSelector = (0, _reselect.createSelector)(visibleRowIdsSelector, function (visibleRowIds) {\n  return visibleRowIds.size;\n});\n/** Gets the columns that are not currently visible\n */\n\nvar hiddenColumnsSelector = exports.hiddenColumnsSelector = (0, _reselect.createSelector)(visibleColumnsSelector, allColumnsSelector, metaDataColumnsSelector, function (visibleColumns, allColumns, metaDataColumns) {\n  var removeColumns = [].concat(_toConsumableArray(visibleColumns), _toConsumableArray(metaDataColumns));\n  return allColumns.filter(function (c) {\n    return removeColumns.indexOf(c) === -1;\n  });\n});\n/** Gets the column ids for the visible columns\n*/\n\nvar columnIdsSelector = exports.columnIdsSelector = (0, _reselect.createSelector)(visibleDataSelector, renderPropertiesSelector, function (visibleData, renderProperties) {\n  if (visibleData.size > 0) {\n    return Object.keys(visibleData.get(0).toJSON()).map(function (k) {\n      return renderProperties.getIn(['columnProperties', k, 'id']) || k;\n    });\n  }\n});\n/** Gets the column titles for the visible columns\n */\n\nvar columnTitlesSelector = exports.columnTitlesSelector = dataSelectors.columnTitlesSelector;\nvar cellValueSelector = exports.cellValueSelector = dataSelectors.cellValueSelector; // TODO: Needs tests and jsdoc\n\nvar rowDataSelector = exports.rowDataSelector = function rowDataSelector(state, _ref) {\n  var griddleKey = _ref.griddleKey;\n  return state.get('data').find(function (r) {\n    return r.get('griddleKey') === griddleKey;\n  }).toJSON();\n};\n\nvar iconsForComponentSelector = exports.iconsForComponentSelector = dataSelectors.iconsForComponentSelector;\nvar iconsByNameSelector = exports.iconsByNameSelector = dataSelectors.iconsForComponentSelector;\nvar stylesForComponentSelector = exports.stylesForComponentSelector = dataSelectors.stylesForComponentSelector;\nvar classNamesForComponentSelector = exports.classNamesForComponentSelector = dataSelectors.classNamesForComponentSelector;","map":null,"metadata":{},"sourceType":"script"}